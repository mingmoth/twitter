(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-769ebc35"],{"3c1b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALhSURBVHgB7ZzNcRNBFITfigQUAiHgEJwBKXCgiiNEwpUqDk4BIjAZQAiEQAKwbFurKtuln5nV25luub+LZUml2ulPP7Mzb1+EMcYYY4wxxhhjjDHGGGOMMdfMEImMH+J1/I276eab6ZW3099vsYlPw5f4HYK0GE+agPlgf84H+pg/Mcbt8DV+hRDj+yn0iPuD49nETZaETWTxLz4fOFiwne6/nwckwYnwwXZ6Q91FEnkCIt6eeExGwpnw5yfljSNPwDh9NE9DL6Eo/B3nHi8mT8Cm6DueVkJF+Pjl/B5J5AkY4l3BpwDQSagKH2Mc4mMkkSZgnhXcqkmoDn8aI+U0dE/VgDpPUReFn3ys6QKAggSG8MEqAgCzBJbwwWoCAKMEpvDBqgIAkwS28MHqAgCDBMbwQRMBoKcE1vBBMwGghwTm8EFTAaClBPbwQXMBoIUEhfBBFwFgTQkq4YNuAsAaEpTCB10FgEwJauGD7gJAhgTF8AGFAHCJBNXwAY0AsETCfFsyfEAlACyQEKrhAzoBoFJCwQtyhg8oBYA0CcThA1oB4GIJ5OEDagFgsQSB8AG9AFAtQSR8kFmayIPE22rH9X4FiVRlX/ePsICE65+Gkkt4GSdixBK0lyL2dagCZZDH0F2Mm6ea838StaiH0FyOfjbPVyoIfo7ehsyRkyxVCVpbkmfOcBUl6GzKFy4vqEnQKEupXNtRksBfmLVwYU1FAndp4oWrmgoSeItzk5aU2SVwlqcnr+czS+C7QGOlzRRWCVyXKK28k8UogecivUbbiGwSOC5TbbyHyySh/4XanTbQWST0bVXQuXqBQUJuzzjBKuXeElr0jDvwZK66nWoJYj3jnsJYIr47lvJWO4I943YwVynXSJDsGadQKFsuoeSrqog2PeOEajWLJEj1jBMKf89JCdQ9417FTaC9Lxgfpmw/cJ9S+HsejvnYeERbMRtjjDHGGGOMMcYYY4wxxhjTnv8fvGHXRkLN9AAAAABJRU5ErkJggg=="},"41e6":function(t,e,s){},"498a":function(t,e,s){"use strict";var a=s("23e7"),r=s("58a8").trim,i=s("c8d2");a({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},"72cc":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"sidebar"},[s("Sidebar")],1),s("div",{staticClass:"chat-container"},[s("div",{staticClass:"chat-head"},[t._m(0),s("div",{staticClass:"chat-head-users"},t._l(t.getMessagedUsers,(function(t){return s("MessageUser",{key:t.id,attrs:{user:t}})})),1)]),s("div",{staticClass:"chat-body"},[s("PrivateRoom")],1)]),s("MessageModal")],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat-head-header"},[a("div",{staticClass:"chat-head-header-title"},[t._v("訊息")]),a("img",{staticClass:"chat-head-header-message",attrs:{src:s("eab8"),alt:"","data-bs-toggle":"modal","data-bs-target":"#new-message-select"}})])}],i=s("5530"),o=s("2f62"),c=s("29b2"),n=s("5ea5"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"chat-head-user",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.selectUser(t.user.User)}}},[s("img",{staticClass:"chat-head-user-avatar",attrs:{src:t.user.User.avatar,alt:""}}),s("div",{staticClass:"chat-head-user-head"},[s("router-link",{staticClass:"chat-head-user-name",attrs:{to:{name:"user-tweets",params:{id:t.user.User.id}}}},[t._v(t._s(t.user.User?t.user.User.name:""))]),s("router-link",{staticClass:"chat-head-user-account",attrs:{to:""}},[t._v("@ "+t._s(t.user.User?t.user.User.account:""))]),s("a",{staticClass:"chat-head-user-moment"},[t._v(t._s(t._f("fromNow")(t.user.createdAt)))]),t.user.isRead||t.user.UserId===this.getCurrentUser.id?s("div",{staticClass:"chat-head-user-intro"},[t._v(" "+t._s(t.user.message)+" ")]):s("div",{staticClass:"chat-head-user-unread"},[t._v(" "+t._s(t.user.message)+" ")])],1)])])},l=[],g=s("2708"),u={name:"MessageUser",mixins:[c["a"],g["b"],g["c"]],props:{user:{type:Object}},data:function(){return{message:{},roomName:""}},computed:Object(i["a"])({},Object(o["c"])(["getCurrentUser"])),sockets:{privateMessage:function(){this.fetchMessagedUsers()}},methods:{selectUser:function(t){this.$store.dispatch("setMessagedUser",t);var e=this.createRoomName(t.id,this.getCurrentUser.id);this.$socket.emit("join",{roomName:e}),this.fetchPrivateMessage(e),this.toggleUnreadMessage(e)}}},A=u,m=s("2877"),h=Object(m["a"])(A,d,l,!1,null,null,null),C=h.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.getMessagedUser.name?a("div",[a("div",{staticClass:"chat-body-header"},[a("div",{staticClass:"chat-body-header-name"},[t._v(t._s(t.getMessagedUser.name))]),a("div",{staticClass:"chat-body-header-account"},[t._v(" @ "+t._s(t.getMessagedUser.account)+" ")])]),a("div",{ref:"message",staticClass:"chat-body-text"},t._l(t.getPriavateMessage,(function(e){return a("div",{key:e.id,staticClass:"chat-body-text-wrapper"},[e.UserId===t.getCurrentUser.id?a("div",{staticClass:"chat-body-text-wrapper-user"},[a("div",{staticClass:"chat-body-text-wrapper-user-text"},[t._v(" "+t._s(e.message)+" ")]),a("div",{staticClass:"chat-body-text-wrapper-user-moment"},[t._v(t._s(t._f("fromNow")(e.createdAt)))])]):a("div",{staticClass:"chat-body-text-wrapper-other"},[a("div",{staticClass:"chat-body-text-wrapper-other-head"},[a("img",{staticClass:"chat-body-text-wrapper-other-head-image",attrs:{src:t._f("emptyAvatar")(e.User?e.User.avatar:""),alt:""}}),a("div",{staticClass:"chat-body-text-wrapper-other-head-text"},[t._v(" "+t._s(e.message)+" ")])]),a("div",{staticClass:"chat-body-text-wrapper-other-body"},[a("div",{staticClass:"chat-body-text-wrapper-other-body-name"}),a("div",{staticClass:"chat-body-text-wrapper-other-body-moment"},[t._v(" "+t._s(t._f("fromNow")(e.createdAt))+" ")])])])])})),0),a("form",{staticClass:"chat-body-foot"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"chat-body-foot-input",attrs:{type:"text",placeholder:"輸入訊息..."},domProps:{value:t.text},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleUnread.apply(null,arguments)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.sendMessage(t.getMessagedUser.id))},input:function(e){e.target.composing||(t.text=e.target.value)}}}),a("img",{staticClass:"chat-body-foot-image",attrs:{src:s("f34b"),alt:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.sendMessage(t.getMessagedUser.id)}}})])]):a("div",{staticClass:"chat-empty"},[t._m(0)])])},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-unselect"},[s("div",{staticClass:"chat-unselect-title"},[t._v("選擇一位聊天對象吧")]),s("button",{staticClass:"btn-unselect",attrs:{"data-bs-toggle":"modal","data-bs-target":"#new-message-select"}},[t._v(" 挑選 ")])])}],p=(s("498a"),{name:"PrivateRoom",mixins:[g["b"],g["c"],c["a"]],data:function(){return{text:""}},created:function(){this.scrollDown()},updated:function(){this.scrollDown()},computed:Object(i["a"])({},Object(o["c"])(["getCurrentUser","getMessagedUser","getPriavateMessage"])),sockets:{join:function(t){console.log(t)},newMessage:function(t){console.log(t),this.$store.dispatch("postMessage",t)},privateMessage:function(){this.fetchMessagedUsers()}},methods:{sendMessage:function(t){if(this.text.trim()){var e={User:this.getCurrentUser,UserId:this.getCurrentUser.id,roomName:this.createRoomName(t,this.getCurrentUser.id),message:this.text,type:"message",createdAt:new Date};this.postMessage(e),this.fetchMessagedUsers(),this.text=""}},toggleUnread:function(){var t=this.createRoomName(this.getMessagedUser.id,this.getCurrentUser.id);this.toggleUnreadMessage(t)},scrollDown:function(){this.$refs.message.scrollTop=this.$refs.message.scrollHeight}}}),w=p,b=Object(m["a"])(w,v,f,!1,null,null,null),U=b.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"new-message-select","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),s("div",{staticClass:"modal-body"},t._l(t.getPopular,(function(e){return s("div",{key:e.id,staticClass:"modal-body-post"},[s("img",{staticClass:"modal-body-post-icon",attrs:{src:t._f("emptyAvatar")(e.avatar),alt:""}}),s("div",{staticClass:"modal-body-post-body"},[s("div",{staticClass:"modal-body-post-body-head"},[s("div",{staticClass:"modal-body-post-body-head-name"},[t._v(t._s(e.name))])]),s("div",{staticClass:"modal-body-post-body-foot"},[s("div",{staticClass:"modal-body-post-body-foot-reply"},[t._v("@ "+t._s(e.account)+" ")])])]),s("div",{staticClass:"modal-body-post-select"},[s("button",{staticClass:"btn-select-message",attrs:{"data-bs-dismiss":"modal"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.selectUser(e)}}},[t._v("聊天")])])])})),0)])])])},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("img",{staticClass:"modal-close",attrs:{src:s("3c1b"),alt:"","data-bs-dismiss":"modal","aria-label":"Close"}}),a("div",{staticClass:"modal-header-title"},[t._v("選擇訊息對象")])])}],M={name:"MessageModal",mixins:[g["e"],g["b"],c["a"]],computed:Object(i["a"])({},Object(o["c"])(["getPopular","getCurrentUser"])),created:function(){this.fetchPopular()},methods:{selectUser:function(t){this.$store.dispatch("setMessagedUser",t);var e=this.createRoomName(t.id,this.getCurrentUser.id);this.fetchPrivateMessage(e),this.toggleUnreadMessage(e)}}},E=M,H=(s("9c48"),Object(m["a"])(E,B,y,!1,null,"4fa50ce6",null)),j=H.exports,D={name:"PrivateChat",mixins:[c["a"]],components:{Sidebar:n["a"],MessageUser:C,PrivateRoom:U,MessageModal:j},sockets:{},created:function(){this.fetchMessagedUsers()},computed:Object(i["a"])({},Object(o["c"])(["getMessagedUser","getCurrentUser","getMessagedUsers"])),watch:function(){}},I=D,x=Object(m["a"])(I,a,r,!1,null,null,null);e["default"]=x.exports},"9c48":function(t,e,s){"use strict";s("41e6")},c8d2:function(t,e,s){var a=s("5e77").PROPER,r=s("d039"),i=s("5899"),o="​᠎";t.exports=function(t){return r((function(){return!!i[t]()||o[t]()!==o||a&&i[t].name!==t}))}},f34b:function(t,e){t.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=chunk-769ebc35.356b6cec.js.map